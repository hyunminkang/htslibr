HTSLIB_DIR=htslib

.PHONY: all htslib create_lib_dir copy_so

LIB_DIR=${R_PACKAGE_DIR}/lib

all: htslib create_lib_dir

htslib:
	$(warning "now building libhts.so")
	cd $(HTSLIB_DIR) && $(MAKE) -f "${R_HOME}/etc/Makeconf" -f Makefile

create_lib_dir:
	mkdir -p ${LIB_DIR}

copy_so: create_lib_dir htslib
	$(warning "now copying libhts.so")
	cd $(HTSLIB_DIR) cp libhts.so ${LIB_DIR}


PKG_LIBS= -lhts -L${LIB_DIR} -Wl,-rpath=${LIB_DIR}
CXX_STD = CXX11
PKG_CPPFLAGS = -Ihtslib -DSTRICT_R_HEADERS
